<?xml version='1.0'?>
<!DOCTYPE fontconfig SYSTEM 'fonts.dtd'>
<fontconfig>

	<!-- 
	Use with the infinality subpixel hinting patch at
	http://www.infinality.net/ for "optimal results" ;-)
	-->

	<!-- ********************  DIRECTIVES  **********************  -->

	<!-- prevent gnome from using embedded bitmaps in fonts like Calibri -->
	<match target="font" >
		<edit name="embeddedbitmap" mode="assign">
			<bool>false</bool>
		</edit>
	</match>

	<!-- Reject bitmap fonts in favour of Truetype, Postscript, etc. -->
	<selectfont>
		<rejectfont>
			<pattern>
				<patelt name="scalable" >
					<bool>false</bool>
				</patelt>
			</pattern>
		</rejectfont>
	</selectfont>
	
	<!-- substitute truetype fonts for bitmap ones -->
	<match target="pattern" >
		<edit name="prefer_outline" >
			<bool>true</bool>
		</edit>
	</match>	

	<!-- ********************  REPLACEMENTS  **********************  -->

	<alias>
		<family>sans</family>
		<default>
			<family>Liberation Sans</family>
		</default>
	</alias>

	<alias>
		<family>sans-serif</family>
		<default>
			<family>Liberation Sans</family>
		</default>
	</alias>

	<alias>
		<family>Helvetica</family>
		<family>Helvetica Neue</family>
		<default>
			<family>Liberation Sans</family>
		</default>
	</alias>

	<!-- Replaces 'sans' with a specific font preference -->
	<match target="font" >
		<test name="family" qual="any" >
			<string>sans</string>
			
		</test>
		<edit mode="assign" name="family" >
			<string>Liberation Sans</string>
		</edit>
	</match>	

	<!-- Replaces 'sans-serif' with a specific font preference -->
	<match target="font" >
		<test name="family" qual="any" >
			<string>sans-serif</string>
		</test>
		<edit mode="assign" name="family" >
			<string>Liberation Sans</string>
		</edit>
	</match>
	
	<!-- Replaces 'serif' with a specific font preference -->
	<match target="font" >
		<test name="family" qual="any" >
			<string>serif</string>
		</test>
		<edit mode="assign" name="family" >
			<string>Liberation Serif</string>
		</edit>
	</match>	

	<match target="font" >
		<test name="family" qual="any" >
			<string>Helvetica</string>
		</test>
		<edit mode="assign" name="family" >
			<string>Liberation Sans</string>
		</edit>
	</match>

	<match target="font" >
		<test name="family" qual="any" >
			<string>Geneva</string>				
		</test>
		<edit mode="assign" name="family" >
			<string>Liberation Sans</string>
		</edit>
	</match>
	<match target="font" >
		<test name="family" qual="any" >
			<string>Helvetica Neue</string>				
		</test>
		<edit mode="assign" name="family" >
			<string>Liberation Sans</string>
		</edit>
	</match>

	<!-- same as above, but different matching/binding process -->
	<match target="pattern" name="family">
		<test name="family" qual="any" >
			<string>Helvetica</string>
		</test>
		<edit binding="strong" mode="prepend" name="family" >
			<string>Liberation Sans</string>
		</edit>
	</match>
	
	<match target="pattern" name="family">
		<test name="family" qual="any" >
			<string>Geneva</string>				
		</test>
		<edit binding="strong" mode="prepend" name="family" >
			<string>Liberation Sans</string>
		</edit>
	</match>	
	<match target="pattern" name="family">
		<test name="family" qual="any" >
			<string>Helvetica Neue</string>				
		</test>
		<edit binding="strong" mode="prepend" name="family" >
			<string>Liberation Sans</string>
		</edit>
	</match>	

	<match target="pattern" name="family" >
		<test name="family" qual="any" >
			<string>Times</string>
		</test>
		<edit binding="strong" mode="prepend" name="family" >
			<string>Liberation Serif</string>
		</edit>
	</match>	
	
	<match target="font" >
		<test name="family" qual="any" >
			<string>Times</string>
		</test>
		<edit mode="assign" name="family" >
			<string>Liberation Serif</string>
		</edit>
	</match>

	<match target="pattern">
		<test name="family" compare="eq" target="default">
			<string>Courier</string>
		</test>
		<edit name="family" mode="prepend" binding="same">
			<string>Liberation Mono</string>
		</edit>
	</match>

	<match target="pattern">
		<test name="family" compare="eq" target="default">
			<string>Courier New</string>
		</test>
		<edit name="family" mode="prepend" binding="same">
			<string>Liberation Mono</string>
		</edit>
	</match>


	<!-- ********************  TWEAKS  **********************  -->

	<!-- ********************  BASE SETTINGS  **********************  -->

	<!-- These are the base settings for all rendered fonts. 
	We modify them for specific fonts later. -->
	<match target="font" >
		<edit mode="assign" name="rgba" >
			<const>rgb</const>
		</edit>
		<edit mode="assign" name="hinting" >
			<bool>true</bool>
		</edit>
		<edit mode="assign" name="autohint" >
			<bool>false</bool>
		</edit>
		<edit mode="assign" name="antialias" >
			<bool>true</bool>
		</edit>
		<edit mode="assign" name="hintstyle" >
			<const>hintfull</const>
		</edit>
		<edit name="lcdfilter" mode="assign">
			<const>lcddefault</const>
		</edit>
	</match>


	<!-- ********************  FONT GROUPS  **********************  -->

	<!-- Example override templates -->

	<match target="font" >
		<test name="family" qual="any" >
			<string>Pragmata</string>
		</test>
		<edit mode="assign" name="hinting" >
			<bool>true</bool>
		</edit>
		<edit mode="assign" name="autohint" >
			<bool>false</bool>
		</edit>
		<edit mode="assign" name="antialias" >
			<bool>true</bool>
		</edit>
		<edit mode="assign" name="hintstyle" >
			<const>hintfull</const>
		</edit>
		<edit name="lcdfilter" mode="assign">
			<const>lcdlight</const>
		</edit>
	</match>
	
<!--
	<match target="font" >
		<test name="family" qual="any" >
			<string>Calibri</string>
		</test>
		<test target="pattern" compare="not_eq" name="slant" >
			<const>roman</const>
		</test>
		<edit mode="assign" name="hinting" >
			<bool>true</bool>
		</edit>
		<edit mode="assign" name="autohint" >
			<bool>true</bool>
		</edit>
		<edit mode="assign" name="antialias" >
			<bool>true</bool>
		</edit>
		<edit mode="assign" name="hintstyle" >
			<const>hintslight</const>
		</edit>
	</match>
-->		

	<!-- Make these fonts use autohint slight hinting -->
	<match target="font" >
		<test name="family" qual="any" >
			<string>Bitstream Charter</string>
			<string>Aller</string>
			<string>Aller Display</string>
			<string>Aller Light</string>
			<string>Century Gothic</string>
			<string>Century Schoolbook L</string>
			<string>Century</string>
			<string>Franklin Gothic Book</string>
			<string>FreeMono</string>
			<string>FreeSans</string>
			<string>FreeSerif</string>			
			<string>Gentium</string>
			<string>Georgia</string>
			<string>Inconsolata</string>		
			<string>Nimbus Roman No9 L</string>
			<string>Utopia</string>
			<string>cmbx10</string>
			<string>cmex10</string>
			<string>cmmi10</string>
			<string>cmr10</string>
			<string>cmsy10</string>
			<string>cmtt10</string>
			<string>eufm10</string>
			<string>msam10</string>
			<string>msbm10</string>
			<string>wasy10</string>
			<string>Eurostile LT Std</string>
		</test>
		<edit mode="assign" name="autohint"  >
			<bool>true</bool>
		</edit>
		<edit mode="assign" name="hintstyle" >
			<const>hintslight</const>
		</edit>		
	</match>


	<!-- ********************  FINAL TWEAKS **********************  -->

	<!-- Artificial oblique for fonts without an italic or oblique version -->
	<!-- QT4 seems to ignore this and makes a SUPER italic version on its own. -->
	<match target="font" >
		<!-- check to see if the font is roman -->
		<test name="slant" >
			<const>roman</const>
		</test>
		<!-- check to see if the pattern requested non-roman -->
		<test target="pattern" compare="not_eq" name="slant" >
			<const>roman</const>
		</test>
		<!-- multiply the matrix to slant the font -->
		<edit mode="assign" name="matrix" >
			<times>
				<name>matrix</name>
				<matrix>
					<double>1.0</double>
					<double>0.2</double>
					<double>0.0</double>
					<double>1.0</double>
				</matrix>
			</times>
		</edit>
		<!-- pretend the font is oblique now -->
		<edit mode="assign" name="slant" >
			<const>oblique</const>
		</edit>
	</match>
	
	<!-- These BCI, fully hinted fonts should use slight autohinting below the given pixelsize -->
	<match target="font" >
		<test name="family" qual="any" >
			<string>FONTNAME</string>
		</test>
		<test compare="less" name="pixelsize" qual="any" >
			<double>14</double>
		</test>
		<edit mode="assign" name="hintstyle" >
			<const>hintslight</const>
		</edit>
		<edit mode="assign" name="autohint" >
			<bool>true</bool>
		</edit>
	</match>	

	<!-- Force marked fonts to have artificial oblique -->
	<match target="font" >
		<!-- check to see if the font is roman -->
		<test compare="less_eq" name="weight" >
			<const>medium</const>
		</test>
		<!-- look for fonts which were marked for fake obliquing -->
		<test name="fake_bold">
			<bool>true</bool>
		</test>
		<!-- multiply the matrix to slant the font -->
		<edit mode="assign" name="embolden" >
			<bool>true</bool>
		</edit>
		<!-- pretend the font is oblique now -->
		<edit mode="assign" name="weight" >
			<const>bold</const>
		</edit>
	</match>	

	<!--  Rescan configuration every 30 seconds when FcFontSetList is called -->
	<rescan>
		<int>10</int>
	</rescan>

</fontconfig>
